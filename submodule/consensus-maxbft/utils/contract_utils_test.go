package utils

import (
	"fmt"
	"testing"

	"chainmaker.org/chainmaker/pb-go/v2/config"
	"chainmaker.org/chainmaker/pb-go/v2/consensus"
	"chainmaker.org/chainmaker/pb-go/v2/consensus/maxbft"
	"chainmaker.org/chainmaker/protocol/v2/test"

	"github.com/gogo/protobuf/proto"
	"github.com/stretchr/testify/require"
	"github.com/tmthrgd/go-hex"
)

func TestConstructContractTxRwSet(t *testing.T) {
	cfg := &config.ChainConfig{
		AuthType: "AAAA",
		Consensus: &config.ConsensusConfig{
			ExtConfig: []*config.ConfigKeyValue{
				{Key: ViewNumsPerEpoch, Value: "100"},
			},
			Nodes: []*config.OrgConfig{
				{NodeId: []string{"node1", "node2", "node3", "node4"}},
			},
		},
	}

	// 1. view = currEpoch.endView + viewEpoch
	val, err := ConstructContractTxRwSet(4401, 4301, 43, cfg, nil, test.NewTestLogger(t))
	var goverContract maxbft.GovernanceContract
	require.NoError(t, proto.Unmarshal(val.TxWrites[0].Value, &goverContract))
	require.NoError(t, err)
	require.EqualValues(t, goverContract.EpochId, 44)
	fmt.Println(goverContract.EndView)
	require.EqualValues(t, goverContract.EndView, 4601)
	require.EqualValues(t, "AAAA", cfg.AuthType)
	require.EqualValues(t, "aaaa", goverContract.ChainConfig.AuthType)

	// 2. view > currEpoch.endView + viewEpoch
	val, err = ConstructContractTxRwSet(1110, 1000, 10, cfg, nil, test.NewTestLogger(t))
	require.NoError(t, proto.Unmarshal(val.TxWrites[0].Value, &goverContract))
	require.NoError(t, err)
	require.EqualValues(t, goverContract.EpochId, 11)
	fmt.Println(goverContract.EndView)
	require.EqualValues(t, goverContract.EndView, 1310)
	require.EqualValues(t, "AAAA", cfg.AuthType)
	require.EqualValues(t, "aaaa", goverContract.ChainConfig.AuthType)

	//	3. view >>>(远大于) currEpoch.endView + viewEpoch
	val, err = ConstructContractTxRwSet(11000000, 1000, 10, cfg, nil, test.NewTestLogger(t))
	require.NoError(t, proto.Unmarshal(val.TxWrites[0].Value, &goverContract))
	require.NoError(t, err)
	require.EqualValues(t, goverContract.EpochId, 11)
	require.EqualValues(t, goverContract.EndView, 11000200)
	require.EqualValues(t, "AAAA", cfg.AuthType)
	require.EqualValues(t, "aaaa", goverContract.ChainConfig.AuthType)

	// 4. view < currEpoch.endView
	val, err = ConstructContractTxRwSet(950, 1000, 10, cfg, nil, test.NewTestLogger(t))
	require.NoError(t, err)
	require.Nil(t, val)

	// 5. view >>>(远大于) currEpoch.endView + viewEpoch & viewEpoch 为素数
	cfg.Consensus.ExtConfig[0].Value = "11"
	val, err = ConstructContractTxRwSet(10000000, 1000, 10, cfg, nil, test.NewTestLogger(t))
	require.NoError(t, proto.Unmarshal(val.TxWrites[0].Value, &goverContract))
	require.NoError(t, err)
	require.EqualValues(t, goverContract.EpochId, 11)
	fmt.Println(goverContract.EndView)
	require.EqualValues(t, goverContract.EndView, 10000022)
	require.EqualValues(t, "AAAA", cfg.AuthType)
	require.EqualValues(t, "aaaa", goverContract.ChainConfig.AuthType)
}

func TestCompareGov(t *testing.T) {
	argsInBlock1 := "080318cd0822a9370a0a474f5645524e414e43451a9a370a0a474f5645524e414e434512ff36080c10b1091a2e516d4e6f455768414866434d52584436327257374a475a587156387174444e79364d42754b47726f7444706f35661a2e516d50424a57776772696e6e7a6257787551374e61706a7757776a5a44706e5772413275777941654158703437751a2e516d574359397359567674646b41753565706e69575670356d3931334235594c7543706f7957394c634367456d6e1a2e516d627853766758635064766263664142625a4b484d53654a626152414e543933706f327965557a3837596945561a2e516d6458507675337661446637414e337a634a6273533244363257653976313870785973536939464c5a7a766b761a2e516d6659796e733343506473705074326f417a6379714156627a654a4d565870794538394651634539394e456e4320042ad5340a06636861696e31120c76322e332e305f616c7068611a147065726d697373696f6e6564776974686365727420042a080a06534841323536320b080110d8041864200a280a3a08080a100a1a00280142be03080312480a1677782d6f7267312e636861696e6d616b65722e6f72671a2e516d6458507675337661446637414e337a634a6273533244363257653976313870785973536939464c5a7a766b7612480a1677782d6f7267322e636861696e6d616b65722e6f72671a2e516d627853766758635064766263664142625a4b484d53654a626152414e543933706f327965557a38375969455612480a1677782d6f7267332e636861696e6d616b65722e6f72671a2e516d574359397359567674646b41753565706e69575670356d3931334235594c7543706f7957394c634367456d6e12480a1677782d6f7267342e636861696e6d616b65722e6f72671a2e516d4e6f455768414866434d52584436327257374a475a587156387174444e79364d42754b47726f7444706f356612480a1677782d6f7267352e636861696e6d616b65722e6f72671a2e516d50424a57776772696e6e7a6257787551374e61706a7757776a5a44706e57724132757779416541587034377512480a1677782d6f7267362e636861696e6d616b65722e6f72671a2e516d6659796e733343506473705074326f417a6379714156627a654a4d565870794538394651634539394e456e434adf070a1677782d6f7267342e636861696e6d616b65722e6f726712c4072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e444343416b4f6741774942416749434a456377436759494b6f5a497a6a30454177497767596f78437a414a42674e5642415954416b4e4f4d5241770a4467594456515149457764435a576c716157356e4d5241774467594456515148457764435a576c716157356e4d523877485159445651514b45785a33654331760a636d63304c6d4e6f59576c75625746725a58497562334a6e4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d540a47574e684c6e64344c5739795a7a517559326868615735745957746c63693576636d63774868634e4d6a49774f4441304d444d784f4451325768634e4d7a49770a4f4441784d444d784f445132576a4342696a454c4d416b474131554542684d43513034784544414f42674e564241675442304a6c61577070626d63784544414f0a42674e564241635442304a6c61577070626d6378487a416442674e5642416f54466e64344c5739795a7a517559326868615735745957746c63693576636d63780a456a415142674e564241735443584a766233517459325679644445694d4341474131554541784d5a593245756433677462334a6e4e43356a61474670626d31680a613256794c6d39795a7a425a4d424d4742797147534d34394167454743437147534d34394177454841304941424c6f5a714750497634543173696674585a6d490a4a476c355656433930437638427371744e48706e4b2f4f39427152706637685766513455312f46776d6e7a77496a6544412f586a71715943414c70715351636e0a79554b6a675a5977675a4d7744675944565230504151482f42415144416745474d41384741315564457745422f7751464d414d42416638774b5159445652304f0a42434945495044316231364e53585966414a506a6d53676e473636733278796f5250705137446a7264795a2f396e67444d455547413155644551512b4d4479430a446d4e6f59576c75625746725a58497562334a6e67676c7362324e68624768766333534347574e684c6e64344c5739795a7a517559326868615735745957746c0a63693576636d65484248384141414577436759494b6f5a497a6a3045417749445277417752414967562b617330706738516461306f367a7a5746456f6d76446e0a644a3271596d656335424d524c4657326c66344349453049583941794a5732513073313448465946417270414a434350686d6f6e764c4445693049505142324d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267332e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e544343416b53674177494241674944444342394d416f4743437147534d343942414d434d49474b4d517377435159445651514745774a44546a45510a4d4134474131554543424d48516d5670616d6c755a7a45514d4134474131554542784d48516d5670616d6c755a7a45664d4230474131554543684d57643367740a62334a6e4d79356a61474670626d3168613256794c6d39795a7a45534d4241474131554543784d4a636d39766443316a5a584a304d53497749415944565151440a45786c6a5953353365433176636d637a4c6d4e6f59576c75625746725a58497562334a6e4d423458445449794d4467774e44417a4d5467304e6c6f5844544d790a4d4467774d54417a4d5467304e6c6f7767596f78437a414a42674e5642415954416b4e4f4d5241774467594456515149457764435a576c716157356e4d5241770a4467594456515148457764435a576c716157356e4d523877485159445651514b45785a3365433176636d637a4c6d4e6f59576c75625746725a58497562334a6e0a4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d5447574e684c6e64344c5739795a7a4d7559326868615735740a5957746c63693576636d63775754415442676371686b6a4f5051494242676771686b6a4f50514d4242774e4341415336577834427451533470784a617a4d78690a3975556e313172504934636b4e7467515551393735754e386370656c524b6b544f596a654867512b496f7a356a3838664556667366386a365764794a615565490a4450744d6f3447574d4947544d41344741315564447745422f77514541774942426a415042674e5648524d4241663845425441444151482f4d436b47413155640a44675169424344614d58306e4134644a634e654d71484632316b636e7237633935697a4664596c73414d716b5a6e71664b44424642674e5648524545506a41380a6767356a61474670626d3168613256794c6d39795a34494a6247396a5957786f62334e3067686c6a5953353365433176636d637a4c6d4e6f59576c75625746720a5a58497562334a6e6877522f414141424d416f4743437147534d343942414d43413063414d45514349455069466b4958354e5a394c345162584739794c6945360a62364a4b4e566b4b6d36486c69543657624279744169426b324444314f786d46346c38786c5565335554344d735669387a344446314e752b6e5850446c2b47350a47673d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267322e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e7a4343416b5367417749424167494444562f704d416f4743437147534d343942414d434d49474b4d517377435159445651514745774a44546a45510a4d4134474131554543424d48516d5670616d6c755a7a45514d4134474131554542784d48516d5670616d6c755a7a45664d4230474131554543684d57643367740a62334a6e4d69356a61474670626d3168613256794c6d39795a7a45534d4241474131554543784d4a636d39766443316a5a584a304d53497749415944565151440a45786c6a5953353365433176636d63794c6d4e6f59576c75625746725a58497562334a6e4d423458445449794d4467774e44417a4d5467304e6c6f5844544d790a4d4467774d54417a4d5467304e6c6f7767596f78437a414a42674e5642415954416b4e4f4d5241774467594456515149457764435a576c716157356e4d5241770a4467594456515148457764435a576c716157356e4d523877485159445651514b45785a3365433176636d63794c6d4e6f59576c75625746725a58497562334a6e0a4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d5447574e684c6e64344c5739795a7a497559326868615735740a5957746c63693576636d63775754415442676371686b6a4f5051494242676771686b6a4f50514d4242774e4341415349312f46706378685968706868514a41540a72344f2f7658365a78586154712b724e63645248752b7975484f73396463474a714845706133625a4f4e4b66634a34724265627a4a6f67453071456b5a49376b0a426862526f3447574d4947544d41344741315564447745422f77514541774942426a415042674e5648524d4241663845425441444151482f4d436b47413155640a4467516942434171752f4c363473412f364e306b476a4751337a37677a544b76464e575344786d54545561427864504e5654424642674e5648524545506a41380a6767356a61474670626d3168613256794c6d39795a34494a6247396a5957786f62334e3067686c6a5953353365433176636d63794c6d4e6f59576c75625746720a5a58497562334a6e6877522f414141424d416f4743437147534d343942414d4341306b414d4559434951444d77346f6433316f566e592b4f52434d5755675a410a6d6e79416c6f6c3741546c52686659337059773643414968414f2f4c672f4f576276682f3879506a654b5a46736c6e3547394d75677642745363355861696a480a445174520a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267312e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e6a4343416b4f674177494241674943616f7777436759494b6f5a497a6a30454177497767596f78437a414a42674e5642415954416b4e4f4d5241770a4467594456515149457764435a576c716157356e4d5241774467594456515148457764435a576c716157356e4d523877485159445651514b45785a33654331760a636d63784c6d4e6f59576c75625746725a58497562334a6e4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d540a47574e684c6e64344c5739795a7a457559326868615735745957746c63693576636d63774868634e4d6a49774f4441304d444d784f4451325768634e4d7a49770a4f4441784d444d784f445132576a4342696a454c4d416b474131554542684d43513034784544414f42674e564241675442304a6c61577070626d63784544414f0a42674e564241635442304a6c61577070626d6378487a416442674e5642416f54466e64344c5739795a7a457559326868615735745957746c63693576636d63780a456a415142674e564241735443584a766233517459325679644445694d4341474131554541784d5a593245756433677462334a6e4d53356a61474670626d31680a613256794c6d39795a7a425a4d424d4742797147534d34394167454743437147534d34394177454841304941424850517a3932346b6e4954792f547533665a2f0a79567a7348673538616e62476c394445775a5334516b477a73654d35522b3268556e7236586f725a5a7632526c4332553751476a4953646a65364d41576c79740a7a42436a675a5977675a4d7744675944565230504151482f42415144416745474d41384741315564457745422f7751464d414d42416638774b5159445652304f0a424349454941496472324a50317572465751632f4b7774695243576553534e487a79497a32454e7274364d54346157444d455547413155644551512b4d4479430a446d4e6f59576c75625746725a58497562334a6e67676c7362324e68624768766333534347574e684c6e64344c5739795a7a457559326868615735745957746c0a63693576636d65484248384141414577436759494b6f5a497a6a3045417749445351417752674968414f794462356b68717a4d395238614e537a553033594b6d0a4b3531684945617459666c72657156514d457266416945416d744e6375416e536d492b4f6f555a4577634b524a3138414a6842434a596137435065634b4a324e0a37516b3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267352e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e544343416b53674177494241674944433868704d416f4743437147534d343942414d434d49474b4d517377435159445651514745774a44546a45510a4d4134474131554543424d48516d5670616d6c755a7a45514d4134474131554542784d48516d5670616d6c755a7a45664d4230474131554543684d57643367740a62334a6e4e53356a61474670626d3168613256794c6d39795a7a45534d4241474131554543784d4a636d39766443316a5a584a304d53497749415944565151440a45786c6a5953353365433176636d63314c6d4e6f59576c75625746725a58497562334a6e4d423458445449794d4467774e44417a4d5467304e6c6f5844544d790a4d4467774d54417a4d5467304e6c6f7767596f78437a414a42674e5642415954416b4e4f4d5241774467594456515149457764435a576c716157356e4d5241770a4467594456515148457764435a576c716157356e4d523877485159445651514b45785a3365433176636d63314c6d4e6f59576c75625746725a58497562334a6e0a4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d5447574e684c6e64344c5739795a7a557559326868615735740a5957746c63693576636d63775754415442676371686b6a4f5051494242676771686b6a4f50514d4242774e434141514153684446716d7362736a7751364535570a4c734e7761756d556c4c4377476669584e776152354351734549536f693972456239384c5035586b416c4c76473271465847592f64554871796a6448774841450a68342b586f3447574d4947544d41344741315564447745422f77514541774942426a415042674e5648524d4241663845425441444151482f4d436b47413155640a44675169424342385156576b736a524e65777a327465746651554e584673654132517a794a732b3732376b3037583265346a424642674e5648524545506a41380a6767356a61474670626d3168613256794c6d39795a34494a6247396a5957786f62334e3067686c6a5953353365433176636d63314c6d4e6f59576c75625746720a5a58497562334a6e6877522f414141424d416f4743437147534d343942414d43413063414d4551434943416b7537534659516a69626853725242342b334c612f0a526e47357261793565304f777a4853483352674941694259783649544b722f6b764953536b744b33676b35303751612f424b687862344d2b6d706c6963312b330a45773d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267362e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e544343416b53674177494241674944427746794d416f4743437147534d343942414d434d49474b4d517377435159445651514745774a44546a45510a4d4134474131554543424d48516d5670616d6c755a7a45514d4134474131554542784d48516d5670616d6c755a7a45664d4230474131554543684d57643367740a62334a6e4e69356a61474670626d3168613256794c6d39795a7a45534d4241474131554543784d4a636d39766443316a5a584a304d53497749415944565151440a45786c6a5953353365433176636d63324c6d4e6f59576c75625746725a58497562334a6e4d423458445449794d4467774e44417a4d5467304e6c6f5844544d790a4d4467774d54417a4d5467304e6c6f7767596f78437a414a42674e5642415954416b4e4f4d5241774467594456515149457764435a576c716157356e4d5241770a4467594456515148457764435a576c716157356e4d523877485159445651514b45785a3365433176636d63324c6d4e6f59576c75625746725a58497562334a6e0a4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d5447574e684c6e64344c5739795a7a597559326868615735740a5957746c63693576636d63775754415442676371686b6a4f5051494242676771686b6a4f50514d4242774e4341415132535257387563326650476f616d5576330a7a6a48636f6157714e6a79356c785675457538444b354962467a4b776b4a48472b76483131546d743433587a34336f464c366d35556864315269764c69684b380a6d754d566f3447574d4947544d41344741315564447745422f77514541774942426a415042674e5648524d4241663845425441444151482f4d436b47413155640a446751694243423435764b576242472b4269397a6569716d52664648666454755579367050702b373771506255676743576a424642674e5648524545506a41380a6767356a61474670626d3168613256794c6d39795a34494a6247396a5957786f62334e3067686c6a5953353365433176636d63324c6d4e6f59576c75625746720a5a58497562334a6e6877522f414141424d416f4743437147534d343942414d43413063414d45514349434e4841786e336869572b6676437658346e58465132720a32765a666c656a6576367a5450413348714831704169414c5a72564f5a32456758682f59616e4978437559396569594c4c554864794c3350544d3543433359640a64673d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a5a2c0a1b434841494e5f434f4e4649472d4e4f44455f49445f555044415445120d0a0453454c461a0541444d494e5a300a1b434841494e5f434f4e4649472d54525553545f524f4f545f41444412110a084d414a4f524954591a0541444d494e5a290a19434841494e5f434f4e4649472d43455254535f465245455a45120c0a03414e591a0541444d494e5a260a1d434f4e54524143545f4d414e4147452d494e49545f434f4e545241435412050a03414e5962008a01250a067761736d65720a046761736d0a0365766d0a08646f636b6572676f0a047778766d10029201001a0a474f5645524e414e4345"
	argsInBlock2 := "080318cd0822a9370a0a474f5645524e414e43451a9a370a0a474f5645524e414e434512ff36080c10b1091a2e516d4e6f455768414866434d52584436327257374a475a587156387174444e79364d42754b47726f7444706f35661a2e516d50424a57776772696e6e7a6257787551374e61706a7757776a5a44706e5772413275777941654158703437751a2e516d574359397359567674646b41753565706e69575670356d3931334235594c7543706f7957394c634367456d6e1a2e516d627853766758635064766263664142625a4b484d53654a626152414e543933706f327965557a3837596945561a2e516d6458507675337661446637414e337a634a6273533244363257653976313870785973536939464c5a7a766b761a2e516d6659796e733343506473705074326f417a6379714156627a654a4d565870794538394651634539394e456e4320042ad5340a06636861696e31120c76322e332e305f616c7068611a147065726d697373696f6e6564576974684365727420042a080a06534841323536320b080110d8041864200a280a3a08080a100a1a00280142be03080312480a1677782d6f7267312e636861696e6d616b65722e6f72671a2e516d6458507675337661446637414e337a634a6273533244363257653976313870785973536939464c5a7a766b7612480a1677782d6f7267322e636861696e6d616b65722e6f72671a2e516d627853766758635064766263664142625a4b484d53654a626152414e543933706f327965557a38375969455612480a1677782d6f7267332e636861696e6d616b65722e6f72671a2e516d574359397359567674646b41753565706e69575670356d3931334235594c7543706f7957394c634367456d6e12480a1677782d6f7267342e636861696e6d616b65722e6f72671a2e516d4e6f455768414866434d52584436327257374a475a587156387174444e79364d42754b47726f7444706f356612480a1677782d6f7267352e636861696e6d616b65722e6f72671a2e516d50424a57776772696e6e7a6257787551374e61706a7757776a5a44706e57724132757779416541587034377512480a1677782d6f7267362e636861696e6d616b65722e6f72671a2e516d6659796e733343506473705074326f417a6379714156627a654a4d565870794538394651634539394e456e434adf070a1677782d6f7267342e636861696e6d616b65722e6f726712c4072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e444343416b4f6741774942416749434a456377436759494b6f5a497a6a30454177497767596f78437a414a42674e5642415954416b4e4f4d5241770a4467594456515149457764435a576c716157356e4d5241774467594456515148457764435a576c716157356e4d523877485159445651514b45785a33654331760a636d63304c6d4e6f59576c75625746725a58497562334a6e4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d540a47574e684c6e64344c5739795a7a517559326868615735745957746c63693576636d63774868634e4d6a49774f4441304d444d784f4451325768634e4d7a49770a4f4441784d444d784f445132576a4342696a454c4d416b474131554542684d43513034784544414f42674e564241675442304a6c61577070626d63784544414f0a42674e564241635442304a6c61577070626d6378487a416442674e5642416f54466e64344c5739795a7a517559326868615735745957746c63693576636d63780a456a415142674e564241735443584a766233517459325679644445694d4341474131554541784d5a593245756433677462334a6e4e43356a61474670626d31680a613256794c6d39795a7a425a4d424d4742797147534d34394167454743437147534d34394177454841304941424c6f5a714750497634543173696674585a6d490a4a476c355656433930437638427371744e48706e4b2f4f39427152706637685766513455312f46776d6e7a77496a6544412f586a71715943414c70715351636e0a79554b6a675a5977675a4d7744675944565230504151482f42415144416745474d41384741315564457745422f7751464d414d42416638774b5159445652304f0a42434945495044316231364e53585966414a506a6d53676e473636733278796f5250705137446a7264795a2f396e67444d455547413155644551512b4d4479430a446d4e6f59576c75625746725a58497562334a6e67676c7362324e68624768766333534347574e684c6e64344c5739795a7a517559326868615735745957746c0a63693576636d65484248384141414577436759494b6f5a497a6a3045417749445277417752414967562b617330706738516461306f367a7a5746456f6d76446e0a644a3271596d656335424d524c4657326c66344349453049583941794a5732513073313448465946417270414a434350686d6f6e764c4445693049505142324d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267332e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e544343416b53674177494241674944444342394d416f4743437147534d343942414d434d49474b4d517377435159445651514745774a44546a45510a4d4134474131554543424d48516d5670616d6c755a7a45514d4134474131554542784d48516d5670616d6c755a7a45664d4230474131554543684d57643367740a62334a6e4d79356a61474670626d3168613256794c6d39795a7a45534d4241474131554543784d4a636d39766443316a5a584a304d53497749415944565151440a45786c6a5953353365433176636d637a4c6d4e6f59576c75625746725a58497562334a6e4d423458445449794d4467774e44417a4d5467304e6c6f5844544d790a4d4467774d54417a4d5467304e6c6f7767596f78437a414a42674e5642415954416b4e4f4d5241774467594456515149457764435a576c716157356e4d5241770a4467594456515148457764435a576c716157356e4d523877485159445651514b45785a3365433176636d637a4c6d4e6f59576c75625746725a58497562334a6e0a4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d5447574e684c6e64344c5739795a7a4d7559326868615735740a5957746c63693576636d63775754415442676371686b6a4f5051494242676771686b6a4f50514d4242774e4341415336577834427451533470784a617a4d78690a3975556e313172504934636b4e7467515551393735754e386370656c524b6b544f596a654867512b496f7a356a3838664556667366386a365764794a615565490a4450744d6f3447574d4947544d41344741315564447745422f77514541774942426a415042674e5648524d4241663845425441444151482f4d436b47413155640a44675169424344614d58306e4134644a634e654d71484632316b636e7237633935697a4664596c73414d716b5a6e71664b44424642674e5648524545506a41380a6767356a61474670626d3168613256794c6d39795a34494a6247396a5957786f62334e3067686c6a5953353365433176636d637a4c6d4e6f59576c75625746720a5a58497562334a6e6877522f414141424d416f4743437147534d343942414d43413063414d45514349455069466b4958354e5a394c345162584739794c6945360a62364a4b4e566b4b6d36486c69543657624279744169426b324444314f786d46346c38786c5565335554344d735669387a344446314e752b6e5850446c2b47350a47673d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267322e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e7a4343416b5367417749424167494444562f704d416f4743437147534d343942414d434d49474b4d517377435159445651514745774a44546a45510a4d4134474131554543424d48516d5670616d6c755a7a45514d4134474131554542784d48516d5670616d6c755a7a45664d4230474131554543684d57643367740a62334a6e4d69356a61474670626d3168613256794c6d39795a7a45534d4241474131554543784d4a636d39766443316a5a584a304d53497749415944565151440a45786c6a5953353365433176636d63794c6d4e6f59576c75625746725a58497562334a6e4d423458445449794d4467774e44417a4d5467304e6c6f5844544d790a4d4467774d54417a4d5467304e6c6f7767596f78437a414a42674e5642415954416b4e4f4d5241774467594456515149457764435a576c716157356e4d5241770a4467594456515148457764435a576c716157356e4d523877485159445651514b45785a3365433176636d63794c6d4e6f59576c75625746725a58497562334a6e0a4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d5447574e684c6e64344c5739795a7a497559326868615735740a5957746c63693576636d63775754415442676371686b6a4f5051494242676771686b6a4f50514d4242774e4341415349312f46706378685968706868514a41540a72344f2f7658365a78586154712b724e63645248752b7975484f73396463474a714845706133625a4f4e4b66634a34724265627a4a6f67453071456b5a49376b0a426862526f3447574d4947544d41344741315564447745422f77514541774942426a415042674e5648524d4241663845425441444151482f4d436b47413155640a4467516942434171752f4c363473412f364e306b476a4751337a37677a544b76464e575344786d54545561427864504e5654424642674e5648524545506a41380a6767356a61474670626d3168613256794c6d39795a34494a6247396a5957786f62334e3067686c6a5953353365433176636d63794c6d4e6f59576c75625746720a5a58497562334a6e6877522f414141424d416f4743437147534d343942414d4341306b414d4559434951444d77346f6433316f566e592b4f52434d5755675a410a6d6e79416c6f6c3741546c52686659337059773643414968414f2f4c672f4f576276682f3879506a654b5a46736c6e3547394d75677642745363355861696a480a445174520a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267312e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e6a4343416b4f674177494241674943616f7777436759494b6f5a497a6a30454177497767596f78437a414a42674e5642415954416b4e4f4d5241770a4467594456515149457764435a576c716157356e4d5241774467594456515148457764435a576c716157356e4d523877485159445651514b45785a33654331760a636d63784c6d4e6f59576c75625746725a58497562334a6e4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d540a47574e684c6e64344c5739795a7a457559326868615735745957746c63693576636d63774868634e4d6a49774f4441304d444d784f4451325768634e4d7a49770a4f4441784d444d784f445132576a4342696a454c4d416b474131554542684d43513034784544414f42674e564241675442304a6c61577070626d63784544414f0a42674e564241635442304a6c61577070626d6378487a416442674e5642416f54466e64344c5739795a7a457559326868615735745957746c63693576636d63780a456a415142674e564241735443584a766233517459325679644445694d4341474131554541784d5a593245756433677462334a6e4d53356a61474670626d31680a613256794c6d39795a7a425a4d424d4742797147534d34394167454743437147534d34394177454841304941424850517a3932346b6e4954792f547533665a2f0a79567a7348673538616e62476c394445775a5334516b477a73654d35522b3268556e7236586f725a5a7632526c4332553751476a4953646a65364d41576c79740a7a42436a675a5977675a4d7744675944565230504151482f42415144416745474d41384741315564457745422f7751464d414d42416638774b5159445652304f0a424349454941496472324a50317572465751632f4b7774695243576553534e487a79497a32454e7274364d54346157444d455547413155644551512b4d4479430a446d4e6f59576c75625746725a58497562334a6e67676c7362324e68624768766333534347574e684c6e64344c5739795a7a457559326868615735745957746c0a63693576636d65484248384141414577436759494b6f5a497a6a3045417749445351417752674968414f794462356b68717a4d395238614e537a553033594b6d0a4b3531684945617459666c72657156514d457266416945416d744e6375416e536d492b4f6f555a4577634b524a3138414a6842434a596137435065634b4a324e0a37516b3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267352e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e544343416b53674177494241674944433868704d416f4743437147534d343942414d434d49474b4d517377435159445651514745774a44546a45510a4d4134474131554543424d48516d5670616d6c755a7a45514d4134474131554542784d48516d5670616d6c755a7a45664d4230474131554543684d57643367740a62334a6e4e53356a61474670626d3168613256794c6d39795a7a45534d4241474131554543784d4a636d39766443316a5a584a304d53497749415944565151440a45786c6a5953353365433176636d63314c6d4e6f59576c75625746725a58497562334a6e4d423458445449794d4467774e44417a4d5467304e6c6f5844544d790a4d4467774d54417a4d5467304e6c6f7767596f78437a414a42674e5642415954416b4e4f4d5241774467594456515149457764435a576c716157356e4d5241770a4467594456515148457764435a576c716157356e4d523877485159445651514b45785a3365433176636d63314c6d4e6f59576c75625746725a58497562334a6e0a4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d5447574e684c6e64344c5739795a7a557559326868615735740a5957746c63693576636d63775754415442676371686b6a4f5051494242676771686b6a4f50514d4242774e434141514153684446716d7362736a7751364535570a4c734e7761756d556c4c4377476669584e776152354351734549536f693972456239384c5035586b416c4c76473271465847592f64554871796a6448774841450a68342b586f3447574d4947544d41344741315564447745422f77514541774942426a415042674e5648524d4241663845425441444151482f4d436b47413155640a44675169424342385156576b736a524e65777a327465746651554e584673654132517a794a732b3732376b3037583265346a424642674e5648524545506a41380a6767356a61474670626d3168613256794c6d39795a34494a6247396a5957786f62334e3067686c6a5953353365433176636d63314c6d4e6f59576c75625746720a5a58497562334a6e6877522f414141424d416f4743437147534d343942414d43413063414d4551434943416b7537534659516a69626853725242342b334c612f0a526e47357261793565304f777a4853483352674941694259783649544b722f6b764953536b744b33676b35303751612f424b687862344d2b6d706c6963312b330a45773d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a4ae4070a1677782d6f7267362e636861696e6d616b65722e6f726712c9072d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949436e544343416b53674177494241674944427746794d416f4743437147534d343942414d434d49474b4d517377435159445651514745774a44546a45510a4d4134474131554543424d48516d5670616d6c755a7a45514d4134474131554542784d48516d5670616d6c755a7a45664d4230474131554543684d57643367740a62334a6e4e69356a61474670626d3168613256794c6d39795a7a45534d4241474131554543784d4a636d39766443316a5a584a304d53497749415944565151440a45786c6a5953353365433176636d63324c6d4e6f59576c75625746725a58497562334a6e4d423458445449794d4467774e44417a4d5467304e6c6f5844544d790a4d4467774d54417a4d5467304e6c6f7767596f78437a414a42674e5642415954416b4e4f4d5241774467594456515149457764435a576c716157356e4d5241770a4467594456515148457764435a576c716157356e4d523877485159445651514b45785a3365433176636d63324c6d4e6f59576c75625746725a58497562334a6e0a4d524977454159445651514c45776c79623239304c574e6c636e5178496a416742674e5642414d5447574e684c6e64344c5739795a7a597559326868615735740a5957746c63693576636d63775754415442676371686b6a4f5051494242676771686b6a4f50514d4242774e4341415132535257387563326650476f616d5576330a7a6a48636f6157714e6a79356c785675457538444b354962467a4b776b4a48472b76483131546d743433587a34336f464c366d35556864315269764c69684b380a6d754d566f3447574d4947544d41344741315564447745422f77514541774942426a415042674e5648524d4241663845425441444151482f4d436b47413155640a446751694243423435764b576242472b4269397a6569716d52664648666454755579367050702b373771506255676743576a424642674e5648524545506a41380a6767356a61474670626d3168613256794c6d39795a34494a6247396a5957786f62334e3067686c6a5953353365433176636d63324c6d4e6f59576c75625746720a5a58497562334a6e6877522f414141424d416f4743437147534d343942414d43413063414d45514349434e4841786e336869572b6676437658346e58465132720a32765a666c656a6576367a5450413348714831704169414c5a72564f5a32456758682f59616e4978437559396569594c4c554864794c3350544d3543433359640a64673d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a5a2c0a1b434841494e5f434f4e4649472d4e4f44455f49445f555044415445120d0a0453454c461a0541444d494e5a300a1b434841494e5f434f4e4649472d54525553545f524f4f545f41444412110a084d414a4f524954591a0541444d494e5a290a19434841494e5f434f4e4649472d43455254535f465245455a45120c0a03414e591a0541444d494e5a260a1d434f4e54524143545f4d414e4147452d494e49545f434f4e545241435412050a03414e5962008a01250a067761736d65720a046761736d0a0365766d0a08646f636b6572676f0a047778766d10029201001a0a474f5645524e414e4345"

	args1 := &consensus.BlockHeaderConsensusArgs{}
	args2 := &consensus.BlockHeaderConsensusArgs{}

	bzInBlock, err := hex.DecodeString(argsInBlock1)
	require.NoError(t, err)

	bzInGenerate, err := hex.DecodeString(argsInBlock2)

	require.NoError(t, err)

	require.NoError(t, proto.Unmarshal(bzInBlock, args1))
	require.NoError(t, proto.Unmarshal(bzInGenerate, args2))
	fmt.Printf("argInBlock1: %+v\n", args1)
	fmt.Printf("argInBlock2: %+v\n", args2)

	gov1 := &maxbft.GovernanceContract{}
	gov2 := &maxbft.GovernanceContract{}

	require.NoError(t, proto.Unmarshal(args1.ConsensusData.TxWrites[0].Value, gov1))
	require.NoError(t, proto.Unmarshal(args2.ConsensusData.TxWrites[0].Value, gov2))

	fmt.Printf("gov1: %+v\n", gov1)
	fmt.Printf("gov2: %+v\n", gov2)

}
